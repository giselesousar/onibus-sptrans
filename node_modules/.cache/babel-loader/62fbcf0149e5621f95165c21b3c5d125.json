{"ast":null,"code":"var _jsxFileName = \"/home/gisele/Documentos/repositorios-github/desafio-aiko-frontend/web/src/pages/Home/components/Mapa/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Row, Col, Container, Button, Card, Tab, ListGroup, Spinner } from 'react-bootstrap';\nimport { FaTrash } from 'react-icons/fa';\nimport MapComponent from './components/Map';\nimport SearchVeiculo from './components/SearchVeiculo';\nimport SearchParada from './components/SearchParada';\nimport Contador from './components/Contador';\nimport VeiculoDetails from './components/VeiculoDetails';\nimport ParadaDetails from './components/ParadaDetails';\nimport TooltipComponent from '../components/Tooltip';\nexport default function Mapa(props) {\n  const {\n    api\n  } = props;\n  const [veiculos, setVeiculos] = useState([]);\n  const [paradas, setParadas] = useState([]);\n  const [mostrarVeiculos, setMostrarVeiculos] = useState(false);\n  const [mostrarParadas, setMostrarParadas] = useState(false);\n  const [atualizacaoHora, setAtualizacaoHora] = useState(null);\n  const [veiculoBuscado, setVeiculoBuscado] = useState(null);\n  const [atualizar, setAtualizar] = useState(false);\n  const [parada, setParada] = useState(null);\n\n  function atualizarDados() {\n    loadVeiculos();\n\n    if (veiculoBuscado) {\n      veiculos.forEach(veiculo => {\n        if (veiculoBuscado.c == veiculo.c) {\n          setVeiculoBuscado(veiculo);\n        }\n      });\n    }\n  }\n\n  function handleDelete() {\n    setVeiculoBuscado(null);\n    setAtualizar(false);\n  }\n\n  function loadVeiculos() {\n    api.get('Posicao').then(response => {\n      setAtualizacaoHora(response.data.hr);\n      setVeiculos(response.data.l);\n    }).catch(function (error) {\n      console.log(\"erro\");\n    });\n  }\n\n  function loadParadas() {\n    api.get('Paradas/Buscar?termosBusca=*').then(response => {\n      setParadas(response.data.l);\n    }).catch(function (error) {\n      console.log(\"erro\");\n    });\n  }\n\n  useEffect(() => {\n    loadVeiculos();\n    loadParadas();\n  }, []);\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"section-2\",\n    style: {\n      marginTop: 30,\n      marginBottom: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, atualizacaoHora ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }, \"Ver no mapa\")), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      marginTop: 30,\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 12,\n    xs: 12,\n    style: {\n      justifyContent: \"center\",\n      marginTop: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Tab.Container, {\n    id: \"list-group-tabs-example\",\n    defaultActiveKey: \"#link1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, {\n    variant: \"success\",\n    action: true,\n    href: \"#link1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 41\n    }\n  }, \"Link 1\"), /*#__PURE__*/React.createElement(ListGroup.Item, {\n    variant: \"success\",\n    action: true,\n    href: \"#link2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 41\n    }\n  }, \"Link 2\"))), /*#__PURE__*/React.createElement(Col, {\n    sm: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Tab.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Tab.Pane, {\n    eventKey: \"#link1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    md: 5,\n    xs: 12,\n    style: {\n      justifyContent: \"center\",\n      marginTop: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-atualizacao\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, \"\\xDAltima atualiza\\xE7\\xE3o: \", atualizacaoHora)), /*#__PURE__*/React.createElement(Card, {\n    body: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 5\n    }\n  }, \"Mostrar ve\\xEDculos no mapa \", /*#__PURE__*/React.createElement(TooltipComponent, {\n    content: \"Informe o letreiro completo ou o c\\xF3digo da linha para vizualizar a posi\\xE7\\xE3o dos ve\\xEDculos dessa linha no mapa\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 34\n    }\n  })), /*#__PURE__*/React.createElement(SearchVeiculo, {\n    veiculos: veiculos,\n    setVeiculoBuscado: setVeiculoBuscado,\n    mostrarVeiculos: mostrarVeiculos,\n    setMostrarVeiculos: setMostrarVeiculos,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 5\n    }\n  }), veiculoBuscado && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(VeiculoDetails, {\n    veiculo: veiculoBuscado,\n    options: /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        direction: \"row\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 28\n      }\n    }, /*#__PURE__*/React.createElement(Contador, {\n      atualizarDados: atualizarDados,\n      atualizar: atualizar,\n      setAtualizar: setAtualizar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 21\n      }\n    }), \" \", ' ', /*#__PURE__*/React.createElement(Button, {\n      style: {\n        margin: 5\n      },\n      variant: \"outline-danger\",\n      onClick: handleDelete,\n      size: \"sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FaTrash, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 82\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, \"Calcular previs\\xE3o de chegada: \")))), /*#__PURE__*/React.createElement(Row, {\n    md: 7,\n    xs: 12,\n    style: {\n      justifyContent: \"center\",\n      display: \"flex\",\n      marginTop: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 1\n    }\n  }, /*#__PURE__*/React.createElement(MapComponent, {\n    parada: parada ? parada.p : null,\n    mostrarTodos: mostrarVeiculos,\n    veiculos: mostrarVeiculos ? veiculos : veiculoBuscado,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 5\n    }\n  })))), /*#__PURE__*/React.createElement(Tab.Pane, {\n    eventKey: \"#link2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 41\n    }\n  })))))))) : /*#__PURE__*/React.createElement(Container, {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    animation: \"border\",\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  })));\n}","map":{"version":3,"sources":["/home/gisele/Documentos/repositorios-github/desafio-aiko-frontend/web/src/pages/Home/components/Mapa/index.js"],"names":["React","useEffect","useState","Row","Col","Container","Button","Card","Tab","ListGroup","Spinner","FaTrash","MapComponent","SearchVeiculo","SearchParada","Contador","VeiculoDetails","ParadaDetails","TooltipComponent","Mapa","props","api","veiculos","setVeiculos","paradas","setParadas","mostrarVeiculos","setMostrarVeiculos","mostrarParadas","setMostrarParadas","atualizacaoHora","setAtualizacaoHora","veiculoBuscado","setVeiculoBuscado","atualizar","setAtualizar","parada","setParada","atualizarDados","loadVeiculos","forEach","veiculo","c","handleDelete","get","then","response","data","hr","l","catch","error","console","log","loadParadas","marginTop","marginBottom","display","justifyContent","width","direction","margin","p"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Row, Col, Container, Button, Card,Tab, ListGroup, Spinner } from 'react-bootstrap';\nimport { FaTrash } from 'react-icons/fa';\n\nimport MapComponent from './components/Map';\nimport SearchVeiculo from './components/SearchVeiculo';\nimport SearchParada from './components/SearchParada';\nimport Contador from './components/Contador';\nimport VeiculoDetails from './components/VeiculoDetails';\nimport ParadaDetails from './components/ParadaDetails';\nimport TooltipComponent from '../components/Tooltip';\n\nexport default function Mapa(props) {\n\n    const { api } = props;\n\n    const [veiculos, setVeiculos] = useState([]);\n    const [paradas, setParadas] = useState([]);\n    const [mostrarVeiculos, setMostrarVeiculos] = useState(false);\n    const [mostrarParadas, setMostrarParadas] = useState(false);\n    const [atualizacaoHora, setAtualizacaoHora] = useState(null);\n    const [veiculoBuscado, setVeiculoBuscado] = useState(null);\n    const [atualizar, setAtualizar] = useState(false);\n\n\n    const [parada, setParada] = useState(null);\n\n    function atualizarDados() {\n        loadVeiculos();\n        if (veiculoBuscado) {\n            veiculos.forEach(veiculo => {\n                if (veiculoBuscado.c == veiculo.c) {\n                    setVeiculoBuscado(veiculo);\n                }\n            })\n        }\n    }\n\n    function handleDelete() {\n        setVeiculoBuscado(null);\n        setAtualizar(false);\n    }\n\n    function loadVeiculos() {\n\n        api.get('Posicao')\n            .then(response => {\n                setAtualizacaoHora(response.data.hr);\n                setVeiculos(response.data.l);\n            })\n            .catch(function (error) {\n                console.log(\"erro\")\n            })\n    }\n    function loadParadas() {\n\n        api.get('Paradas/Buscar?termosBusca=*')\n            .then(response => {\n                setParadas(response.data.l);\n            })\n            .catch(function (error) {\n                console.log(\"erro\")\n            })\n    }\n\n    useEffect(() => {\n        loadVeiculos();\n        loadParadas();\n    }, [])\n\n\n    return (\n        <Container className=\"section-2\" style={{ marginTop: 30, marginBottom: 30 }}>\n            {atualizacaoHora ?\n                <>\n                    <Row style={{\n                        display: \"flex\",\n                        justifyContent: \"center\"\n                    }}>\n                        <h1>Ver no mapa</h1>\n                    </Row>\n                    <Row style={{\n                        marginTop: 30,\n                        width: \"100%\"\n                    }}>\n                        <Col md={12} xs={12} style={{\n                            justifyContent: \"center\",\n                            marginTop: 20\n                        }}>\n                        <Tab.Container id=\"list-group-tabs-example\" defaultActiveKey=\"#link1\">\n                            <Row>\n                                <Col sm={4}>\n                                    <ListGroup>\n                                        <ListGroup.Item variant=\"success\" action href=\"#link1\">\n                                            Link 1\n                                    </ListGroup.Item> \n                                        <ListGroup.Item variant=\"success\" action href=\"#link2\">\n                                            Link 2\n                                </ListGroup.Item>\n                                    </ListGroup>\n                                </Col>\n                                <Col sm={8}>\n                                    <Tab.Content>\n                                        <Tab.Pane eventKey=\"#link1\">\n                                            <Col>\n                                        <Row md={5} xs={12} style={{\n    justifyContent: \"center\",\n    marginTop: 20\n}}>\n    <div className=\"container-atualizacao\">\n        <h3>Última atualização: {atualizacaoHora}</h3>\n    </div>\n    <Card body>\n    <h4>Mostrar veículos no mapa <TooltipComponent content=\"Informe o letreiro completo ou o código da linha para vizualizar a posição dos veículos dessa linha no mapa\"/></h4>\n    <SearchVeiculo \n        veiculos={veiculos} \n        setVeiculoBuscado={setVeiculoBuscado} \n        mostrarVeiculos={mostrarVeiculos}\n        setMostrarVeiculos={setMostrarVeiculos} \n    />\n    {veiculoBuscado && \n        <>\n            <VeiculoDetails \n                veiculo={veiculoBuscado}\n                options={  <div style={{\n                    display: \"flex\",\n                    direction: \"row\"\n                }}>\n                    <Contador\n                        atualizarDados={atualizarDados}\n                        atualizar={atualizar}\n                        setAtualizar={setAtualizar}\n                    /> {' '}\n                    <Button style={{\n                        margin: 5\n                    }} variant=\"outline-danger\" onClick={handleDelete} size=\"sm\"><FaTrash/></Button>\n                    </div>\n                    }\n            />\n            <h4>Calcular previsão de chegada: </h4>\n            \n        </>\n    }\n    </Card>\n</Row>\n<Row md={7} xs={12} style={{\n    justifyContent: \"center\",\n    display: \"flex\",\n    marginTop: 30\n}}>\n    <MapComponent\n        parada={parada ? parada.p : null}\n        mostrarTodos={mostrarVeiculos}\n        veiculos={mostrarVeiculos ? veiculos : veiculoBuscado}\n    />\n</Row>\n</Col>\n                                        </Tab.Pane>\n                                        <Tab.Pane eventKey=\"#link2\">\n                                        </Tab.Pane>\n                                    </Tab.Content>\n                                </Col>\n                            </Row>\n                        </Tab.Container>\n                        </Col>\n                    </Row>\n                </>\n                :\n\n                <Container style={{\n                    display: \"flex\",\n                    justifyContent: \"center\"\n                }}>\n                    <Spinner animation=\"border\" variant=\"success\" />\n                </Container>}\n        </Container>\n    )\n}"]},"metadata":{},"sourceType":"module"}