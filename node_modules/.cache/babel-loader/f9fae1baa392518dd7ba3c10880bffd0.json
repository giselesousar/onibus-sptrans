{"ast":null,"code":"var _jsxFileName = \"/home/gisele/Documentos/repositorios-github/desafio-aiko-frontend/web/src/pages/Home/components/Section2/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Row, Col, Container, Button, Card, Spinner } from 'react-bootstrap';\nimport { FaTrash } from 'react-icons/fa';\nimport MapComponent from './components/Map';\nimport SearchVeiculo from './components/SearchVeiculo';\nimport SearchParada from './components/SearchParada';\nimport Contador from './components/Contador';\nimport VeiculoDetails from './components/VeiculoDetails';\nimport ParadaDetails from './components/ParadaDetails';\nimport TooltipComponent from './components/Tooltip';\nexport default function Section2(props) {\n  const {\n    api\n  } = props;\n  const [veiculos, setVeiculos] = useState([]);\n  const [atualizacaoHora, setAtualizacaoHora] = useState(null);\n  const [veiculoBuscado, setVeiculoBuscado] = useState(null);\n  const [atualizar, setAtualizar] = useState(false);\n  const [parada, setParada] = useState(null);\n\n  function atualizarDados() {\n    loadVeiculos();\n\n    if (veiculoBuscado) {\n      veiculos.forEach(veiculo => {\n        if (veiculoBuscado.c == veiculo.c) {\n          setVeiculoBuscado(veiculo);\n        }\n      });\n    }\n  }\n\n  function handleDelete() {\n    setVeiculoBuscado(null);\n    setAtualizar(false);\n  }\n\n  function loadVeiculos() {\n    api.get('Posicao').then(response => {\n      setAtualizacaoHora(response.data.hr);\n      setVeiculos(response.data.l);\n    }).catch(function (error) {\n      console.log(\"erro\");\n    });\n  }\n\n  useEffect(() => {\n    loadVeiculos();\n  }, []);\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"section-2\",\n    style: {\n      marginTop: 30,\n      marginBottom: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, atualizacaoHora ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, \"Ver no mapa\")), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      marginTop: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    md: 5,\n    xs: 12,\n    style: {\n      justifyContent: \"center\",\n      marginTop: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-atualizacao\",\n    style: {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 21\n    }\n  }, \"\\xDAltima atualiza\\xE7\\xE3o: \", atualizacaoHora)), /*#__PURE__*/React.createElement(Card, {\n    body: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, \"Mostrar \\xF4nibus no mapa \", /*#__PURE__*/React.createElement(TooltipComponent, {\n    content: \"mensagem\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 44\n    }\n  })), /*#__PURE__*/React.createElement(SearchVeiculo, {\n    veiculos: veiculos,\n    setVeiculoBuscado: setVeiculoBuscado,\n    atualizar: atualizar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }), veiculoBuscado && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(VeiculoDetails, {\n    veiculo: veiculoBuscado,\n    options: /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        direction: \"row\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 40\n      }\n    }, /*#__PURE__*/React.createElement(Contador, {\n      atualizarDados: atualizarDados,\n      atualizar: atualizar,\n      setAtualizar: setAtualizar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 33\n      }\n    }), \" \", ' ', /*#__PURE__*/React.createElement(Button, {\n      style: {\n        margin: 5\n      },\n      variant: \"outline-danger\",\n      onClick: handleDelete,\n      size: \"sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(FaTrash, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 94\n      }\n    }))),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 25\n    }\n  }, \"Calcular previs\\xE3o de chegada: \"), /*#__PURE__*/React.createElement(SearchParada, {\n    setParada: setParada,\n    veiculo: veiculoBuscado,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  }), parada && /*#__PURE__*/React.createElement(ParadaDetails, {\n    parada: parada,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 29\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    md: 7,\n    xs: 12,\n    style: {\n      justifyContent: \"center\",\n      display: \"flex\",\n      marginTop: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MapComponent, {\n    parada: parada ? parada.p : null,\n    veiculoBuscado: veiculoBuscado,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 17\n    }\n  })))) : /*#__PURE__*/React.createElement(Container, {\n    style: {\n      display: \"flex\",\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    animation: \"border\",\n    variant: \"success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 16\n    }\n  })));\n}","map":{"version":3,"sources":["/home/gisele/Documentos/repositorios-github/desafio-aiko-frontend/web/src/pages/Home/components/Section2/index.js"],"names":["React","useEffect","useState","Row","Col","Container","Button","Card","Spinner","FaTrash","MapComponent","SearchVeiculo","SearchParada","Contador","VeiculoDetails","ParadaDetails","TooltipComponent","Section2","props","api","veiculos","setVeiculos","atualizacaoHora","setAtualizacaoHora","veiculoBuscado","setVeiculoBuscado","atualizar","setAtualizar","parada","setParada","atualizarDados","loadVeiculos","forEach","veiculo","c","handleDelete","get","then","response","data","hr","l","catch","error","console","log","marginTop","marginBottom","display","justifyContent","direction","margin","p"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Row, Col, Container, Button, Card, Spinner } from 'react-bootstrap';\nimport {FaTrash} from 'react-icons/fa';\n\nimport MapComponent from './components/Map';\nimport SearchVeiculo from './components/SearchVeiculo';\nimport SearchParada from './components/SearchParada';\nimport Contador from './components/Contador';\nimport VeiculoDetails from './components/VeiculoDetails';\nimport ParadaDetails from './components/ParadaDetails';\nimport TooltipComponent from './components/Tooltip';\n\nexport default function Section2(props) {\n\n    const { api } = props;\n\n    const [veiculos, setVeiculos] = useState([]);\n    const [atualizacaoHora, setAtualizacaoHora] = useState(null);\n    const [veiculoBuscado, setVeiculoBuscado] = useState(null);\n    const [atualizar, setAtualizar] = useState(false);\n\n\n    const [parada, setParada] = useState(null);\n\n    function atualizarDados() {\n        loadVeiculos();\n        if (veiculoBuscado) {\n            veiculos.forEach(veiculo => {\n                if (veiculoBuscado.c == veiculo.c) {\n                    setVeiculoBuscado(veiculo);\n                }\n            })\n        }\n    }\n\n    function handleDelete(){\n        setVeiculoBuscado(null);\n        setAtualizar(false);\n    }\n\n    function loadVeiculos() {\n\n        api.get('Posicao')\n            .then(response => {\n                setAtualizacaoHora(response.data.hr);\n                setVeiculos(response.data.l);\n            })\n            .catch(function (error) {\n                console.log(\"erro\")\n            })\n    }\n\n    useEffect(() => {\n        loadVeiculos();\n    }, [])\n\n    return (\n        <Container className=\"section-2\" style={{ marginTop: 30, marginBottom: 30 }}>\n           {atualizacaoHora ? \n           <>\n           <Row style={{\n            display: \"flex\",\n            justifyContent: \"center\"\n        }}>\n            <h1>Ver no mapa</h1>\n        </Row>\n        <Row style={{\n            marginTop: 30,\n        }}>\n            <Col md={5} xs={12} style={{\n                justifyContent: \"center\",\n                marginTop: 20\n            }}>\n                <div className=\"container-atualizacao\" style={{\n               \n                }}>\n                    <h3>Última atualização: {atualizacaoHora}</h3>\n                </div>\n                <Card body>\n                <h4>Mostrar ônibus no mapa <TooltipComponent content=\"mensagem\"/></h4>\n                <SearchVeiculo veiculos={veiculos} setVeiculoBuscado={setVeiculoBuscado} atualizar={atualizar} />\n                {veiculoBuscado && \n                    <>\n                        <VeiculoDetails \n                            veiculo={veiculoBuscado}\n                            options={  <div style={{\n                                display: \"flex\",\n                                direction: \"row\"\n                            }}>\n                                <Contador\n                                    atualizarDados={atualizarDados}\n                                    atualizar={atualizar}\n                                    setAtualizar={setAtualizar}\n                                /> {' '}\n                                <Button style={{\n                                    margin: 5\n                                }} variant=\"outline-danger\" onClick={handleDelete} size=\"sm\"><FaTrash/></Button>\n                                </div>\n                                }\n                        />\n                        <h4>Calcular previsão de chegada: </h4>\n                        <SearchParada\n                            setParada={setParada}\n                            veiculo={veiculoBuscado}\n                        />\n                        {\n                            parada && \n                            <ParadaDetails parada={parada}/>\n                        }\n                    </>\n                }\n                </Card>\n            </Col>\n            <Col md={7} xs={12} style={{\n                justifyContent: \"center\",\n                display: \"flex\",\n                marginTop: 30\n            }}>\n                <MapComponent\n                    parada={parada ? parada.p : null}\n                    veiculoBuscado={veiculoBuscado}\n                />\n            </Col>\n        </Row>\n           </>\n           :\n           \n           <Container style={{\n               display: \"flex\",\n               justifyContent: \"center\"\n           }}>\n               <Spinner animation=\"border\" variant=\"success\"/>\n               </Container>} \n        </Container>\n    )\n}"]},"metadata":{},"sourceType":"module"}